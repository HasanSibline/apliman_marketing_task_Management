# üß™ QA Test Execution Checklist

**Execution Date:** November 11, 2025  
**Tester:** QA Agent  
**Environment:** Production (https://taskmanagement-backendv2.onrender.com)

---

## ‚úÖ QUICK START - CRITICAL PATH TESTING

Execute these tests **IN ORDER** to verify core functionality:

### Phase 1: System Administrator Tests (15 min)

#### ‚úÖ Test 1.1: Admin Login
```
URL: https://[frontend-url]/admin/login
Credentials: superadmin@apliman.com / SuperAdmin123!

Steps:
1. Open admin login page
2. Enter credentials
3. Click "Sign In"
4. Verify redirect to /admin/companies
5. Verify no console errors

Expected: Successfully logged in ‚úì
```

#### ‚úÖ Test 1.2: Create Company with AI
```
Pre-requisite: Logged in as admin

Steps:
1. Click "Create New Company"
2. STEP 1 - Basic Info:
   - Name: "Test Company QA"
   - Slug: "testqa"
   - Admin Name: "QA Admin"
   - Admin Email: "qa@testqa.com"
   - Admin Password: "TestQA123!"
   - Click NEXT
3. STEP 2 - AI Configuration:
   - Paste your Google Gemini API key
   - Check "Enable AI"
   - Click NEXT
4. STEP 3 - Subscription:
   - Plan: PRO
   - Days: 30
   - Click "Create Company"

Expected: 
- Company created successfully ‚úì
- Admin credentials displayed ‚úì
- Can see company in list ‚úì
```

#### ‚úÖ Test 1.3: Verify AI Key Persistence
```
Pre-requisite: Company created with AI key

Steps:
1. Click "Edit" on Test Company QA
2. Navigate to AI section
3. Check if AI key is visible

Expected: AI key should be visible (decrypted) ‚úì
```

---

### Phase 2: Company Login & Authentication (10 min)

#### ‚úÖ Test 2.1: Company Admin Login - TOKEN TEST (CRITICAL!)
```
URL: https://[frontend-url]/testqa/login
Credentials: qa@testqa.com / TestQA123!

Steps:
1. Open browser DevTools (F12)
2. Go to Console tab
3. Navigate to /testqa/login
4. Enter credentials
5. Click "Sign In"
6. IMMEDIATELY check console

Expected Results:
‚úì Redirected to /dashboard
‚úì NO 401 errors in console
‚úì Toast: "Welcome back, QA Admin!"
‚úì Dashboard loads with data

Critical Checks:
- Open DevTools > Application > Local Storage
- Verify "token" key exists
- Token should be a long JWT string (starts with "eyJ")
```

#### ‚úÖ Test 2.2: Token Sent with API Calls
```
Pre-requisite: Logged in as company admin

Steps:
1. Open DevTools > Network tab
2. Click on any page (Analytics, Users, etc.)
3. Select an API call in Network tab
4. Check "Request Headers"

Expected:
‚úì Authorization: Bearer [token] header present
‚úì Requests return 200, not 401
```

---

### Phase 3: Company Admin Permissions (15 min)

#### ‚úÖ Test 3.1: Workflows Access
```
Pre-requisite: Logged in as company admin

Steps:
1. Click "Workflows" in sidebar
2. Check for "Create Workflow" button
3. Check console for errors

Expected:
‚úì Page loads successfully
‚úì NO 401 errors
‚úì "Create Workflow" button visible
```

#### ‚úÖ Test 3.2: Analytics - All 3 Tabs
```
Pre-requisite: Logged in as company admin

Steps:
1. Click "Analytics" in sidebar
2. Click "Dashboard" tab
3. Click "Team Analytics" tab  
4. Click "Task Analytics" tab
5. Check console after each tab

Expected:
‚úì All 3 tabs load successfully
‚úì NO 401 errors for any tab
‚úì Data displayed in each tab
```

#### ‚úÖ Test 3.3: Users Management
```
Pre-requisite: Logged in as company admin

Steps:
1. Click "Users" in sidebar
2. Click "Add User" button
3. Fill form:
   - Name: "Test Employee"
   - Email: "employee@testqa.com"
   - Password: "Emp123!"
   - Role: EMPLOYEE
   - Position: "Tester"
4. Submit

Expected:
‚úì User created successfully
‚úì Appears in users list
‚úì NO 401 errors
```

---

### Phase 4: AI Features Testing (20 min)

#### ‚úÖ Test 4.1: AI Chat - Company Name Test (CRITICAL!)
```
Pre-requisite: Logged in as company admin (Test Company QA)

Steps:
1. Click ApliChat icon (bottom right)
2. Wait for chat to load
3. Type: "Tell me about our company"
4. Send message
5. Wait for response

Expected:
‚úì Chat loads successfully
‚úì NO 401 errors
‚úì Response mentions "Test Company QA" (actual company name)
‚úì Response does NOT say "Apliman"
‚úì Response is relevant and contextual
```

#### ‚úÖ Test 4.2: AI Task Generation - Description
```
Pre-requisite: Logged in as company admin

Steps:
1. Click "Tasks" in sidebar
2. Click "Create Task"
3. Enter title: "Redesign company website"
4. Click "Generate with AI" button (description section)
5. Wait for generation

Expected:
‚úì NO 401 errors
‚úì Description generated
‚úì Content mentions "Test Company QA" or uses company context
‚úì Content is relevant to the title
```

#### ‚úÖ Test 4.3: AI Subtask Generation
```
Pre-requisite: Creating a task

Steps:
1. Fill task form:
   - Title: "Launch new marketing campaign"
   - Description: "Plan and execute Q1 marketing campaign"
   - Goals: "Increase brand awareness"
   - Select workflow
2. Submit task
3. Open the created task
4. Check subtasks section

Expected:
‚úì Task created successfully
‚úì Subtasks auto-generated by AI
‚úì Subtasks are relevant to the task
‚úì NO errors in console
```

#### ‚úÖ Test 4.4: AI @ Mentions - User Suggestions
```
Pre-requisite: Chat open

Steps:
1. Open ApliChat
2. Type "@" in chat input
3. Check suggestions dropdown

Expected:
‚úì Dropdown appears with users
‚úì Only shows users from "Test Company QA"
‚úì Does NOT show users from other companies
```

---

### Phase 5: Multi-Tenant Isolation (20 min)

#### ‚úÖ Test 5.1: Create Second Company
```
Pre-requisite: Logged in as System Admin

Steps:
1. Logout from company portal
2. Login to /admin/login
3. Create another company:
   - Name: "Second Company QA"
   - Slug: "secondqa"
   - Admin: "admin@secondqa.com" / "SecondQA123!"
   - Add different AI key (if available)

Expected:
‚úì Second company created successfully
```

#### ‚úÖ Test 5.2: Data Isolation - Tasks
```
Pre-requisite: Both companies created, each with tasks

Steps:
1. Login to testqa
2. Create a task: "Task for Test Company"
3. Note the task appears in list
4. Logout
5. Login to secondqa
6. View tasks list

Expected:
‚úì Task from Test Company is NOT visible
‚úì Only Second Company tasks visible
‚úì Complete data isolation confirmed
```

#### ‚úÖ Test 5.3: Data Isolation - Users
```
Pre-requisite: Both companies have users

Steps:
1. Login to testqa
2. Note users list (employee@testqa.com, etc.)
3. Logout
4. Login to secondqa
5. View users list

Expected:
‚úì testqa users NOT visible
‚úì Only secondqa users visible
```

#### ‚úÖ Test 5.4: AI Isolation - Company Names
```
Pre-requisite: Both companies have AI enabled

Steps:
1. Login to testqa
2. Open ApliChat
3. Ask: "What is our company name?"
4. Note response
5. Logout
6. Login to secondqa
7. Ask same question

Expected:
‚úì testqa AI says "Test Company QA"
‚úì secondqa AI says "Second Company QA"
‚úì No cross-contamination
```

#### ‚úÖ Test 5.5: AI Isolation - Knowledge Sources
```
Pre-requisite: Both companies exist

Steps:
1. Login to testqa
2. Go to Knowledge Sources
3. Add source: "Test Company Info" (type: COMPANY)
4. Logout
5. Login to secondqa
6. Go to Knowledge Sources

Expected:
‚úì testqa knowledge source NOT visible
‚úì Each company has separate knowledge sources
```

---

### Phase 6: Role-Based Access Control (15 min)

#### ‚úÖ Test 6.1: COMPANY_ADMIN Full Access
```
Pre-requisite: Logged in as qa@testqa.com (COMPANY_ADMIN)

Checklist:
‚ñ° Can access Workflows page
‚ñ° Can CREATE workflow
‚ñ° Can access ALL analytics tabs
‚ñ° Can add/edit/delete users
‚ñ° Can view company settings
‚ñ° Cannot access /admin/companies (System Admin only)

Expected: All checks pass ‚úì
```

#### ‚úÖ Test 6.2: EMPLOYEE Limited Access
```
Pre-requisite: Created employee user, logged in as employee

Checklist:
‚ñ° Can view Tasks page
‚ñ° Can view assigned tasks
‚ñ° Can update own task status
‚ñ° Can view User Analytics (own stats)
‚ñ° CANNOT access Team Analytics
‚ñ° CANNOT access Task Analytics  
‚ñ° CANNOT create workflows
‚ñ° CANNOT add users

Expected: Limited access confirmed ‚úì
```

---

### Phase 7: Error Scenarios (10 min)

#### ‚úÖ Test 7.1: Wrong Company Login
```
Steps:
1. Navigate to /testqa/login
2. Enter: admin@secondqa.com (different company)
3. Enter correct password
4. Click Sign In

Expected:
‚úì Error: "Your account is not associated with this company"
‚úì Login blocked
```

#### ‚úÖ Test 7.2: Suspended Company
```
Pre-requisite: System admin access

Steps:
1. Admin suspends "Test Company QA"
2. Try to login to /testqa/login

Expected:
‚úì Error: "Company account is suspended"
‚úì Login blocked
‚úì Reactivate for further tests
```

#### ‚úÖ Test 7.3: Invalid AI Key
```
Steps:
1. Admin edits company
2. Changes AI key to "INVALID_KEY_123"
3. Save
4. Login as company user
5. Try AI chat

Expected:
‚úì Error message displayed
‚úì "AI service error" or similar
‚úì Graceful failure (no crash)
```

---

## üìä TEST EXECUTION RESULTS

### Critical Path Results
| Phase | Test | Status | Notes |
|-------|------|--------|-------|
| 1 | Admin Login | ‚è≥ Pending | |
| 1 | Create Company | ‚è≥ Pending | |
| 1 | AI Key Persistence | ‚è≥ Pending | |
| 2 | Company Login Token | ‚è≥ Pending | **CRITICAL** |
| 2 | Token in API Calls | ‚è≥ Pending | **CRITICAL** |
| 3 | Workflows Access | ‚è≥ Pending | **CRITICAL** |
| 3 | Analytics All Tabs | ‚è≥ Pending | **CRITICAL** |
| 3 | Users Management | ‚è≥ Pending | |
| 4 | AI Chat Company Name | ‚è≥ Pending | **CRITICAL** |
| 4 | AI Task Generation | ‚è≥ Pending | **CRITICAL** |
| 4 | AI Subtasks | ‚è≥ Pending | **CRITICAL** |
| 4 | AI @ Mentions | ‚è≥ Pending | |
| 5 | Second Company | ‚è≥ Pending | |
| 5 | Tasks Isolation | ‚è≥ Pending | **CRITICAL** |
| 5 | Users Isolation | ‚è≥ Pending | **CRITICAL** |
| 5 | AI Company Names | ‚è≥ Pending | **CRITICAL** |
| 5 | AI Knowledge Isolation | ‚è≥ Pending | **CRITICAL** |
| 6 | COMPANY_ADMIN Access | ‚è≥ Pending | **CRITICAL** |
| 6 | EMPLOYEE Limited | ‚è≥ Pending | |
| 7 | Wrong Company Login | ‚è≥ Pending | |
| 7 | Suspended Company | ‚è≥ Pending | |
| 7 | Invalid AI Key | ‚è≥ Pending | |

---

## üéØ PASS/FAIL CRITERIA

### CRITICAL FAILURES (Must Fix Immediately):
- ‚ùå Any 401 errors after login
- ‚ùå Token not saved to localStorage
- ‚ùå COMPANY_ADMIN cannot access workflows/analytics
- ‚ùå AI uses wrong company name
- ‚ùå Data visible across companies

### MAJOR FAILURES (Fix Before Production):
- ‚ùå AI key not persisting
- ‚ùå Role permissions not working
- ‚ùå AI features not working

### MINOR FAILURES (Can fix post-launch):
- ‚ö†Ô∏è UI glitches
- ‚ö†Ô∏è Slow performance (>5s)
- ‚ö†Ô∏è Missing validation messages

---

## üìù HOW TO EXECUTE

### For Manual Testing:
1. Start from Phase 1
2. Execute each test in order
3. Mark status: ‚úÖ Pass, ‚ùå Fail, ‚ö†Ô∏è Warning
4. Document any failures with screenshots
5. If critical failure found, STOP and fix

### For Automated Testing:
```bash
# Backend tests
cd backend
npm run test

# Frontend tests  
cd frontend
npm run test

# E2E tests (if available)
npm run test:e2e
```

---

## üêõ BUG REPORT TEMPLATE

```markdown
### Bug ID: [ID]
**Test Case:** [Test ID]
**Severity:** Critical / Major / Minor
**Status:** Open / In Progress / Fixed

**Description:**
[What went wrong]

**Steps to Reproduce:**
1. [Step 1]
2. [Step 2]
3. [Step 3]

**Expected Result:**
[What should happen]

**Actual Result:**
[What actually happened]

**Console Errors:**
```
[Paste console errors]
```

**Screenshots:**
[Attach screenshots]

**Environment:**
- Browser: [Chrome/Firefox/Safari]
- OS: [Windows/Mac/Linux]
- Date: [Date]
```

---

## ‚úÖ SIGN OFF

Once all CRITICAL tests pass:

- [ ] All Phase 1 tests passed
- [ ] All Phase 2 tests passed (NO 401 errors!)
- [ ] All Phase 3 tests passed (COMPANY_ADMIN permissions work)
- [ ] All Phase 4 tests passed (AI works correctly)
- [ ] All Phase 5 tests passed (Multi-tenant isolation verified)
- [ ] All Phase 6 tests passed (RBAC working)
- [ ] All Phase 7 tests passed (Error handling works)

**QA Approval:** _________________  
**Date:** _________________  
**Ready for Production:** YES / NO


